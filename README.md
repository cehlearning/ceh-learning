
# راهنمای کامل امنیت و هک با مثال‌های عملی

## 1. تحلیل هدر ایمیل (Email Header) و استخراج اطلاعات حساس
هدر ایمیل حاوی اطلاعاتی مانند آدرس IP فرستنده، مسیر عبور ایمیل و سرورهای درگیر است. ابزارهایی مثل `Email Header Analyzer Online` و `Email Tracker Pro` برای تجزیه و تحلیل این هدرها استفاده می‌شوند.

### مثال هدر ایمیل:
```
Received: from mail.example.com (192.168.0.1) by smtp.example.com;
Date: Mon, 01 Jan 2024 12:00:00 +0000
From: "Sender Name" <sender@example.com>
To: "Recipient Name" <recipient@example.com>
Subject: Test Email
```

### اطلاعات حساس:
- **آدرس IP** فرستنده
- **سرورهای ایمیل** و مسیر ارسال

## 2. پیدا کردن مکان IP (IP Location Finder)
برای پیدا کردن موقعیت مکانی فیزیکی یک IP از ابزارهایی مثل `IP Location Finder` استفاده کنید که اطلاعات جغرافیایی مثل کشور و شهر را نمایش می‌دهد.

## 3. اسکن شبکه

### پیدا کردن IP آدرس
در سیستم‌عامل لینوکس از دستور `ifconfig` برای پیدا کردن IP خود استفاده کنید:
```
ifconfig
```
خروجی شامل IP آدرس شبکه شماست (مثل `192.168.1.x`).

### TTL (Time to Live)
- در لینوکس مقدار پیش‌فرض TTL **64** است.
- در ویندوز مقدار TTL **32** است.

## 4. ارتقا دسترسی با دستور `sudo su -`
برای دسترسی به سطح مدیر (root) از دستور زیر استفاده کنید:
```
sudo su -
```

## 5. اسکن شبکه با Nmap
ابزار `nmap` برای کشف دستگاه‌ها و بررسی امنیت شبکه به کار می‌رود. در ادامه چند دستور رایج `nmap` آمده است:

### اسکن ساده شبکه (Ping Scan)
```
nmap -sP -v 192.0.0.0/24
```
یا
```
nmap -sn 192.0.0.0/24
```

### اسکن به روش Xmas
```
sudo nmap -sX 192.168.0.0
```

## 6. ارتباط با سرور از طریق Telnet
برای بررسی اتصال به یک سرور از دستور `telnet` استفاده کنید. مثال:
```
telnet aparat.com 80
```
ارسال یک درخواست HTTP ساده:
```
GET /
```
یا اتصال به پورت HTTPS:
```
telnet aparat.com 443
```

## 7. تجزیه و تحلیل شبکه با Wireshark و hping3
`Wireshark` ابزاری برای مانیتور کردن ترافیک شبکه است. به کمک `hping3` می‌توانید پکت‌های خاصی را ارسال کنید:
```
hping3 -1 aparat.com
```
برای ارسال پکت ACK به پورت مشخص:
```
hping3 -A aparat.com -p 443
```

برای ارسال پکت‌های زیاد به منظور تست حمله flood:
```
hping3 -v --flood -c 1000000 -d 120 -S -p 80 -s 192.168.0.0 aparat.com
```

## 8. اسکن وضعیت (Stateful Inspection)
برای اتصال به دستگاه‌های شبکه و نمایش پورت‌های باز از این دستور استفاده کنید:
```
nmap -sT -v 192.0.0.0/24
```

### اسکن مخفی (Stealth Scan)
```
nmap -sS -v 192.0.0.0/24
```

### اسکن به روش FIN
```
nmap -sF -v 192.0.0.0/24
```

### اسکن بدون پکت (Null Scan)
```
nmap -sN -v 192.0.0.0/24
```

### شناسایی سیستم عامل‌ها در شبکه
```
nmap -sO -v 192.0.0.0/24
```

### اسکن به روش Zombie
```
nmap -Pn -sI 192.0.0.0 192.1.1.1 -p 80 --packet-trace
```

## 9. اطلاعات دامنه با WHOIS
برای به دست آوردن جزئیات یک دامنه از دستور زیر استفاده کنید:
```
whois aparat.com
```

## 10. پیدا کردن IP وبسایت
با استفاده از دستور `nslookup` می‌توانید IP آدرس یک وبسایت را پیدا کنید:
```
nslookup aparat.com
```

## 11. دنبال کردن مسیر پکت‌ها (Traceroute)
برای مشاهده مسیر عبور پکت‌ها از سیستم تا یک وبسایت:
```
tcptraceroute aparat.com
```

## 12. دانلود کامل وبسایت
با نصب `httrack` می‌توانید یک وبسایت کامل را دانلود کنید:
```
apt search httrack
httrack
```

## 13. جستجوی متادیتا در فایل‌ها با Metagoofil
برای پیدا کردن متادیتا در فایل‌های عمومی (مثل PDF):
```
metagoofil -d aparat.com -t pdf
```

## 14. ساخت پکت‌های دست‌ساز با Scapy
مثالی از ساخت و ارسال یک پکت سفارشی با `scapy`:
```
from scapy.all import *
send(IP(src="192.168.1.1", dst="192.168.1.2")/ICMP()/"text")
```

## 15. هش کردن فایل‌ها
برای هش کردن یک فایل از دستورات زیر استفاده کنید:
```
md5sum file.txt
sha256sum file.txt
```

## 16. مشاهده و ویرایش رمز عبور کاربران
فایل‌های رمز عبور کاربران را با دستور زیر مشاهده کنید:
```
less /etc/passwd
less /etc/shadow
```

## 17. بررسی رکوردهای DNS
برای بررسی رکوردهای DNS:
```
dig +short aparat.com
dig axfr aparat.com @aparat.com
```

## 18. جمع‌آوری اطلاعات از روتر با SNMP
برای جمع‌آوری اطلاعات سخت‌افزاری یک روتر:
```
snmpwalk -v 1 -c public demo.snmplabs.com 1.3.6.1.4.1.2021.4.5.0
```

## 19. همگام‌سازی زمان با سرور NTP
برای همگام‌سازی زمان سیستم با سرور NTP:
```
ntpdate pool.ntp.org
```

### لیست دستگاه‌های متصل به سرور NTP
```
sudo nmap -sU -pU:123 --script=ntp-monlist pool.ntp.org
```

## 20. پنهان‌سازی اطلاعات در تصویر با Steghide
برای پنهان کردن یک فایل درون تصویر:
```
steghide embed -cf image.jpg -ef secret.txt
```
و برای استخراج اطلاعات:
```
steghide extract -sf image.jpg
```

## 21. مشاهده تاریخچه دستورات
برای نمایش تاریخچه دستورات ترمینال:
```
history
```

برای پاک کردن تاریخچه دستورات:
```
unset $HISTFILE
```

## 22. ساخت فایل‌های مخفی در ویندوز
مثال از ساخت یک فایل مخفی در ویندوز با استفاده از استریم NTFS:
```
notepad file.txt:a.txt
```

## 23. حمله مرد میانی با mitmproxy
برای راه‌اندازی `mitmproxy` جهت انجام حمله مرد میانی:
```
sudo mitmproxy
```
